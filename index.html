<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
      #loading-indicator {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 20px;
        border-radius: 10px;
        display: none;
      }
      #frame-controls {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(0, 0, 0, 0.7);
        padding: 10px;
        border-radius: 10px;
        display: flex;
        gap: 10px;
        z-index: 1000;
      }
      .frame-button {
        padding: 5px 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
      }
      .frame-button:hover {
        opacity: 0.8;
      }
      #toggle-frame {
        background-color: #4caf50;
        color: white;
      }
      #black-frame {
        background-color: #000000;
        color: white;
      }
      #wood-frame {
        background-color: #8b4513;
        color: white;
      }
      #gold-frame {
        background-color: #ffd700;
        color: black;
      }
      #red-frame {
        background-color: #ff0000;
        color: white;
      }
      #play-mp3 {
        background-color: #007bff;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="loading-indicator">正在加載AR體驗，請稍候...</div>

    <div id="frame-controls">
      <button id="toggle-frame" class="frame-button">隱藏框架</button>
      <button id="black-frame" class="frame-button">Black</button>
      <button id="wood-frame" class="frame-button">Wood</button>
      <button id="gold-frame" class="frame-button">Gold</button>
      <button id="red-frame" class="frame-button">Red</button>
      <button id="play-mp3" class="frame-button">播放音效</button>
    </div>

    <a-scene{
  "version": "1.0",
  "images": 1,
  "timestamp": "2025-07-04T04:44:54.541Z",
  "features": [
    {
      "index": 0,
      "name": "金屬海報背面.png",
      "featureCount": 101
    }
  ]
}
      mindar-image="imageTargetSrc: https://cdn.glitch.global/5ccc0053-b02d-4729-80a7-aa2242565329/targets.mind?v=1751617178948;warmupTolerance:5; missTolerance:600; filterMinCF:0.000001; filterBeta:500"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <img
          id="profile"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/Big%20Head%20Shot.png"
        />
        <img
          id="website"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/website.png"
        />
        <img
          id="Email"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/EMAIL.png"
        />
        <img
          id="phone"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/phone.png"
        />
        <img
          id="image LINE"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/Line-1.png"
        />
        <img
          id="image Youtube"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/Youtube-1.png"
        />
        <img
          id="image IG"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/Instagram-1.png"
        />
        <img
          id="image FB"
          src="https://raw.githubusercontent.com/isaoinvest/name-card/main/Facebook-1.png"
        />
        <video
          id="video1"
          src="https://cdn.glitch.me/5ccc0053-b02d-4729-80a7-aa2242565329/%E4%B8%80%E7%95%AB%E5%8D%83%E8%A8%80%E6%96%B0%E8%81%9E%E5%A0%B1%E5%B0%8E.mp4?v=1703167356285"
          autoplay
          loop
        ></video>
        <a-asset-item
          id="raccoonModel"
          src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.2/examples/image-tracking/assets/band-example/raccoon/scene.gltf"
        ></a-asset-item>

        <img
          id="frame-texture-wood"
          src="https://cdn.glitch.global/5ccc0053-b02d-4729-80a7-aa2242565329/istockphoto-1393065816-612x612.jpg?v=1728362602087"
          crossorigin="anonymous"
        />
        <img
          id="frame-texture-gold"
          src="https://cdn.glitch.global/5ccc0053-b02d-4729-80a7-aa2242565329/pngtree-gold-textured-background-image_1366422.jpg?v=1728362572428"
          crossorigin="anonymous"
        />

        <audio
          id="mp3-sound"
          src="https://cdn.glitch.global/5ccc0053-b02d-4729-80a7-aa2242565329/avengers_assemble.mp3?v=1728377587921"
        ></audio>
      </a-assets>

      <a-camera
        position="0 0 0"
        look-controls="enabled: false"
        cursor="fuse: false; rayOrigin: mouse;"
        raycaster="far: ${customFields.libVersion}; objects: .clickable"
      ></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-entity
          id="interaction-prompt"
          position="0 -0.5 -1"
          text="value: 點擊元素以互動; align: center; color: #FFFFFF; width: 2"
          animation="property: opacity; from: 0; to: 1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"
        ></a-entity>
        <a-entity
          text="value: Red Panda Keeper\nMingHsun Li; color: #FFF"
          position="1.2 0.68 -1.5"
          scale="2 2 2"
        ></a-entity>
        <a-gltf-model
          rotation="0 0 0"
          position="-0.25 -0.15 0"
          scale="0.09 0.09 0.09"
          src="#raccoonModel"
          animation-mixer
        ></a-gltf-model>
        <a-image
          src="#profile"
          width="0.55"
          height="0.55"
          position="0.6 0.9 -1.5"
          rotation="0 0 0"
        ></a-image>
        <a-image
          src="#website"
          width="0.65"
          height="0.25"
          position="0.6 0.4 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: https://isaoinvest.com"
        ></a-image>
        <a-image
          src="#Email"
          width="0.65"
          height="0.25"
          position="0.6 0.1 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: mailto:isaoinvest@gmail.com"
        ></a-image>
        <a-image
          src="#phone"
          width="0.65"
          height="0.23"
          position="0.6 -0.2 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: tel:+886920820259"
        ></a-image>
        <a-image
          src="#image LINE"
          width="0.3"
          height="0.3"
          position="0.6 -0.65 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: https://line.me/R/ti/p/@722fdkca"
        ></a-image>
        <a-image
          src="#image Youtube"
          width="0.3"
          height="0.3"
          position="0.2 -0.65 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: https://www.youtube.com/channel/UC7hJoQaFXoqB-tW4zACOtvQ"
        ></a-image>
        <a-image
          src="#image IG"
          width="0.3"
          height="0.3"
          position="-0.2 -0.65 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: https://www.instagram.com/isaoinvest"
        ></a-image>
        <a-image
          src="#image FB"
          width="0.3"
          height="0.3"
          position="-0.6 -0.65 -1.5"
          rotation="0 0 0"
          class="clickable"
          link="href: https://www.facebook.com/profile.php?id=61552552833098"
        ></a-image>
      </a-entity>

      <a-entity mindar-image-target="targetIndex: 1">
        <a-entity id="video-container">
          <a-video
            src="#video1"
            height="1.05"
            width="1.5"
            position="0 0 0"
            rotation="0 0 0"
            class="clickable"
            click-handler1
          ></a-video>
          <a-entity id="video-frame" visible="true">
            <!-- Top -->
            <a-box
              position="0 0.5625 0"
              scale="1.5 0.05 0.05"
              color="#000000"
            ></a-box>
            <!-- Bottom -->
            <a-box
              position="0 -0.5625 0"
              scale="1.5 0.05 0.05"
              color="#000000"
            ></a-box>
            <!-- Left -->
            <a-box
              position="-0.75 0 0"
              scale="0.05 1.15 0.05"
              color="#000000"
            ></a-box>
            <!-- Right -->
            <a-box
              position="0.75 0 0"
              scale="0.05 1.15 0.05"
              color="#000000"
            ></a-box>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent("click-handler1", {
        init: function () {
          var video = document.querySelector("#video1");
          var playing = false;
          this.el.addEventListener("click", function () {
            if (!playing) {
              video.play();
            } else {
              video.pause();
            }
            playing = !playing;
          });
        },
      });

      // MP3 撥放按鈕
      const mp3Button = document.getElementById("play-mp3");
      const mp3Sound = document.getElementById("mp3-sound");

      mp3Button.addEventListener("click", () => {
        mp3Sound.play();
      });

      // Loading indicator logic
      const loadingIndicator = document.getElementById("loading-indicator");
      document.addEventListener("DOMContentLoaded", () => {
        loadingIndicator.style.display = "block";
      });

      document.querySelector("a-scene").addEventListener("loaded", () => {
        loadingIndicator.style.display = "none";
      });

      // GSAP animation for 3D model
      const raccoonModel = document.querySelector("a-gltf-model");
      if (raccoonModel) {
        raccoonModel.addEventListener("loaded", () => {
          gsap.to(raccoonModel.object3D.position, {
            y: "+=0.1",
            duration: 2,
            yoyo: true,
            repeat: -1,
            ease: "power1.inOut",
          });
        });
      }

      // Hover effect for clickable elements
      const clickableElements = document.querySelectorAll(".clickable");
      clickableElements.forEach((element) => {
        element.addEventListener("mouseenter", () => {
          gsap.to(element.object3D.scale, {
            x: 1.4,
            y: 1.4,
            z: 1.4,
            duration: 0.3,
          });
        });
        element.addEventListener("mouseleave", () => {
          gsap.to(element.object3D.scale, { x: 1, y: 1, z: 1, duration: 0.3 });
        });
      });

      // Frame control logic
      const videoFrame = document.querySelector("#video-frame");
      const toggleFrameBtn = document.querySelector("#toggle-frame");
      const blackFrameBtn = document.querySelector("#black-frame");
      const woodFrameBtn = document.querySelector("#wood-frame");
      const goldFrameBtn = document.querySelector("#gold-frame");
      const redFrameBtn = document.querySelector("#red-frame");

      function setFrameColor(color) {
        const frameParts = videoFrame.querySelectorAll("a-box");
        frameParts.forEach((part) => {
          part.setAttribute("color", color);
          part.removeAttribute("material");
        });
      }

      function setFrameTexture(textureId) {
        const frameParts = videoFrame.querySelectorAll("a-box");
        frameParts.forEach((part) => {
          part.setAttribute("material", `src: #${textureId}`);
          part.removeAttribute("color");
        });
      }

      let frameVisible = true;
      toggleFrameBtn.addEventListener("click", () => {
        frameVisible = !frameVisible;
        videoFrame.setAttribute("visible", frameVisible);
        toggleFrameBtn.textContent = frameVisible ? "隱藏框架" : "顯示框架";
        console.log("Frame visibility toggled:", frameVisible);
      });

      blackFrameBtn.addEventListener("click", () => setFrameColor("#000000"));
      woodFrameBtn.addEventListener("click", () =>
        setFrameTexture("frame-texture-wood")
      );
      goldFrameBtn.addEventListener("click", () =>
        setFrameTexture("frame-texture-gold")
      );
      redFrameBtn.addEventListener("click", () => setFrameColor("#FF0000"));

      // Debug logging
      console.log("Frame controls initialized");
      console.log("Toggle button:", toggleFrameBtn);
      console.log("Black button:", blackFrameBtn);
      console.log("Wood button:", woodFrameBtn);
      console.log("Gold button:", goldFrameBtn);
      console.log("Red button:", redFrameBtn);

      const imageclick = document.querySelector("#image FB");
      if (imageclick) {
        imageclick.addEventListener("click", (event) => {
          console.log("image click");
        });
      }
    </script>
  </body>
</html>
